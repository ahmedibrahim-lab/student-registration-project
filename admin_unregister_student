#!/bin/bash

# Database credentials
USER="root"
DB="StudentRegistration"

# Prompt admin for the student username and course code
echo "Enter the username of the student to unregister:"
read username

echo "Enter the course code (e.g., CS101) to unregister the student from:"
read course_code

# Find student ID and course ID
student_id=$(sudo mysql -u $USER -D $DB -s -N -e "SELECT student_id FROM Students WHERE student_id=(SELECT user_id FROM Users WHERE username='$username');")
course_id=$(sudo mysql -u $USER -D $DB -s -N -e "SELECT course_id FROM Courses WHERE course_code='$course_code';")

# Unregister the student from the course
sudo mysql -u $USER -D $DB -e "DELETE FROM Registrations WHERE student_id='$student_id' AND course_id='$course_id';"

echo "Student $username has been successfully unregistered from course $course_code!"
